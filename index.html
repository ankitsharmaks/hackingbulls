<!DOCTYPE html>
<html lang="en">
<head>
    <title>Timelines</title>
    <meta charset="utf-8">
    <meta name="description" content="TimelineJS example">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <!-- Style-->
    <style>
        html, body {
            height:100%;
            padding: 0px;
            margin: 0px;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="../css/pageload.css">
    <!-- HTML5 shim, for IE6-8 support of HTML elements--><!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"> </script>
    <script src="http://fgnass.github.io/spin.js/spin.js"> </script>
    <script src="public/hod/queryIndex.js"> </script>
    <link title="timeline-styles" rel="stylesheet" href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">
    <!-- 2 -->
    <script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>
</head>
<body>
<div id="searchDiv">
    <input id="searchString" type="text" class="textox"/>
    <button id="submitSearch" class="myButton" value="submit">Search</button>
</div>
<!-- BEGIN Timeline Embed -->
<!-- 1 -->
<div id='timeline-goback'></div>
<div id='timeline-embed'></div>
<!-- 3 -->
<script type="text/javascript">
    timeline = new TL.Timeline('timeline-embed',
            null);
</script>
<script type="text/javascript">
    jQuery.fn.center = function () {
        this.css("position","absolute");
        this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) +
                        $(window).scrollTop()) + "px");
        this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) +
                        $(window).scrollLeft()) + "px");
        return this;
    }
    $("#searchString").keyup(function(event){
        if(event.keyCode == 13){
            $('#submitSearch').click();
        }
    });
    $('#timeline-embed').fadeOut();
    $('#searchDiv').center();

    $(window).resize(function() {
        $('#searchDiv').center();
    });

    window.addEventListener("keydown", function(e){
        /*
         keyCode: 8
         keyIdentifier: "U+0008"
         */
        if(e.keyCode === 8 && document.activeElement.type !== 'text') {
            e.preventDefault();
            console.log(document.activeElement);
            $('#timeline-goback').click();
            //alert('Prevent page from going back');
        }
    });
    $('#timeline-goback').click(function () {
        $('#timeline-embed').fadeOut(1000);
        $('#searchDiv').fadeIn();
    });

    $('#submitSearch').click(function(){
        console.log('Hi, thanks for submitting value -> '+document.getElementById('searchString').value);
        queryIndex(document.getElementById('searchString').value);
        $('#searchDiv').fadeOut();
        var target = document.getElementById('timeline-embed');
        var spinner = new Spinner().spin(target);
    });
</script>

<!-- END Timeline Embed-->
</body>
</html>